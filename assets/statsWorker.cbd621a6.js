import{bv as T,k as y,oi as x,oj as w,ok as V,ol as F,om as I,on as E,oo as P,op as h,oq as D,or as b}from"./vendor.c28ea743.js";let d=null;async function v(e,a){if(!a)return[];const r=e.field,i=e.valueExpression,n=e.normalizationType,l=e.normalizationField,s=e.normalizationTotal,o=[],t=e.viewInfoParams;let u=null,c=null;if(i){if(!d){const{arcadeUtils:m}=await T();d=m}u=d.createFunction(i),c=t&&d.getViewInfo({viewingMode:t.viewingMode,scale:t.scale,spatialReference:new y(t.spatialReference)})}return a.forEach(m=>{const p=m.attributes;let f;if(i){const z=d.createExecContext(m,c);f=d.executeFunction(u,z)}else p&&(f=p[r]);if(n&&isFinite(f)){const z=p&&parseFloat(p[l]);f=x(f,n,z,s)}o.push(f)}),o}async function C(e){const{attribute:a,features:r}=e,{normalizationType:i,normalizationField:n,minValue:l,maxValue:s,fieldType:o}=a,t=await v({field:a.field,valueExpression:a.valueExpression,normalizationType:i,normalizationField:n,normalizationTotal:a.normalizationTotal,viewInfoParams:a.viewInfoParams},r),u=w({normalizationType:i,normalizationField:n,minValue:l,maxValue:s}),c={value:.5,fieldType:o},m=o==="esriFieldTypeString"?V({values:t,supportsNullCount:u,percentileParams:c}):F({values:t,minValue:l,maxValue:s,useSampleStdDev:!i,supportsNullCount:u,percentileParams:c});return I(m,o==="esriFieldTypeDate")}async function M(e){const{attribute:a,features:r}=e,i=await v({field:a.field,valueExpression:a.valueExpression,viewInfoParams:a.viewInfoParams},r),n=E(i);return P(n,a.domain,a.returnAllCodedValues)}async function S(e){const{attribute:a,features:r}=e,{field:i,normalizationType:n,normalizationField:l,normalizationTotal:s,classificationMethod:o}=a,t=await v({field:i,valueExpression:a.valueExpression,normalizationType:n,normalizationField:l,normalizationTotal:s,viewInfoParams:a.viewInfoParams},r),u=h(t,{field:i,normalizationType:n,normalizationField:l,normalizationTotal:s,classificationMethod:o,standardDeviationInterval:a.standardDeviationInterval,numClasses:a.numClasses,minValue:a.minValue,maxValue:a.maxValue});return D(u,o)}async function $(e){const{attribute:a,features:r}=e,{field:i,normalizationType:n,normalizationField:l,normalizationTotal:s,classificationMethod:o}=a,t=await v({field:i,valueExpression:a.valueExpression,normalizationType:n,normalizationField:l,normalizationTotal:s,viewInfoParams:a.viewInfoParams},r);return b(t,{field:i,normalizationType:n,normalizationField:l,normalizationTotal:s,classificationMethod:o,standardDeviationInterval:a.standardDeviationInterval,numBins:a.numBins,minValue:a.minValue,maxValue:a.maxValue})}export{S as classBreaks,$ as histogram,C as summaryStatistics,M as uniqueValues};
