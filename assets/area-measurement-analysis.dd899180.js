import"./modulepreload-polyfill.b7f2da20.js";import{a as y,i as h,o as d,D as b,t as A,b as E}from"./utils.ed0797c0.js";import{b as k,v}from"./vendor.c28ea743.js";y();let r=null,a=null;const t=h(b);t.popup.autoOpenEnabled=!1;d("add-analysis",C);d("add-to-widget",p);function C(){let o=null;t.on("click",async u=>{var s;o==null||o.abort();const{signal:g}=o=new AbortController;try{const{results:i,ground:l}=await t.hitTest(u);A(g);const c=(s=i.find(n=>n.graphic))==null?void 0:s.graphic;if(!c||!l)return;let e=c.geometry;const m=l.mapPoint.z;e=e.clone(),e.rings=e.rings.map(n=>n.map(([f,w])=>[f,w,m])),r=new k({geometry:e}),t.analyses.removeAll(),t.analyses.add(r),a&&p()}catch(i){E(i)}})}function p(){a&&(t.ui.remove(a),a.destroy()),a=new v({view:t,analysis:r}),t.ui.add(a,"top-right")}
