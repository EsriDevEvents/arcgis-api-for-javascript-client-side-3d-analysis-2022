import{fb as se,fc as re,dh as ie,f4 as oe,G as ae,aM as f,cP as ne,di as G,dj as p,dm as I,dO as K,O as n,dn as le,br as X,aJ as W,cb as he,fd as F,dk as L,dl as A,cX as S,V as c,fe as Q,aG as U,ff as M,fg as ce,d0 as de,fh as ue,fi as _e,fj as pe,dp as $,fk as v,fl as fe,b5 as ge,a0 as Z,fm as me,b0 as ye,l as m,cW as we,fn as N,X as Oe,Y as ve,J as y,K as b,L as ee,M as Ce,fo as j,aN as Re,cC as be,ap as te,bf as Ae,fp as Pe,bh as Ee,bi as xe,fq as De,fr as D,fs as $e,ft as H,aH as Ge,dx as Y,fu as Se,bC as Te,fv as We,dz as Fe,dJ as Me,fw as Ve}from"./vendor.c28ea743.js";import{y as Ie,p as Ne}from"./colorUtils.7c4b6dc5.js";class st extends ie{constructor(e){super(e),this._ray=oe(),this._externalResources=null,this._handles=new ae,this._isWorldDown=!1,this._start=f(),this._end=ne(1,0,0),this._width=1,this._color=G(1,0,1,1),this._polygonOffset=!1,this._writeDepthEnabled=!0,this._innerWidth=0,this._innerColor=G(1,1,1,1),this._stipplePattern=null,this._stippleOffColor=null,this._stipplePreferContinuous=!0,this._falloff=0,this._extensionType=u.LINE,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=p.OccludeAndTransparent,this._fadedExtensions=q,this.applyProps(e)}createExternalResources(){const e=new I(this.materialParameters);this._handles.add(this.view.state.watch("camera",()=>{this._updateGeometry()}));const t=new K({view:this.view,attached:this._laserlineEnabled});this._externalResources={material:e,laserline:t}}destroyExternalResources(){n(this._externalResources)&&this._externalResources.laserline.destroy(),this._externalResources=null,this._handles.removeAll()}forEachExternalMaterial(e){n(this._externalResources)&&e(this._externalResources.material)}createGeometries(e){const t=[f(),f()],s=this.extensionType===u.FADED;s&&t.push(f(),f());const r=s?new Float32Array([1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]):null,a=le.createPolylineGeometry(t,null,r);e.addGeometry(a,X(this._externalResources).material),this._updateVertices(e)}updateVisibility(e){super.updateVisibility(e),n(this._externalResources)&&(this._externalResources.laserline.visible=e)}setStartEndFromWorldDownAtLocation(e){this._isWorldDown=!0,W(this._start,e),this.view.renderCoordsHelper.worldUpAtPosition(e,this._end),he(this._end,e,this._end),F(this._start,this._end,this._ray),this._updateGeometry()}get start(){return this._start}set start(e){this._isWorldDown=!1,L(this._start,e)||(W(this._start,e),F(this._start,this._end,this._ray),this._updateGeometry())}get end(){return this._end}set end(e){this._isWorldDown=!1,L(this._end,e)||(W(this._end,e),F(this._start,this._end,this._ray),this._updateGeometry())}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){A(e,this._color)||(S(this._color,e),this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){A(e,this._innerColor)||(S(this._innerColor,e),this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){const t=n(e)!==n(this._stipplePattern);this._stipplePattern=e,t?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){(c(e)||c(this._stippleOffColor)||!A(e,this._stippleOffColor))&&(this._stippleOffColor=n(e)?Q(e):null,this._updateMaterial())}get stipplePreferContinuous(){return this._stipplePreferContinuous}set stipplePreferContinuous(e){e!==this._stipplePreferContinuous&&(this._stipplePreferContinuous=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get extensionType(){return this._extensionType}set extensionType(e){e!==this._extensionType&&(this._extensionType=e,this._updateGeometry())}get _laserlineAttached(){return this._laserlineEnabled&&n(this._laserlineStyle)}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(e){this._laserlineStyle=e,n(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached,n(e)&&(this._externalResources.laserline.style=e))}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,n(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get fadedExtensions(){return this._fadedExtensions}set fadedExtensions(e){this._fadedExtensions=U(e,q),this.recreateGeometry()}_updateMaterial(){c(this._externalResources)||this._externalResources.material.setParameters(this.materialParameters)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateGeometry(){n(this.object)&&this._updateVertices(this.object)}_updateVertices(e){const t=this._extensionType===u.FADED?this._updateLineSegmentFinite(B):this._updateLineSegmentInfinite(this._extensionType,B);this._updateVertexAttributes(e,t),n(this._externalResources)&&(this._externalResources.laserline.intersectsLine=t)}_updateLineSegmentFinite(e){return M(this._start,this._end,e)}_updateLineSegmentInfinite(e,t){const s=this.view.state.camera;switch(ce(this._ray,g),e){case u.LINE:g.c0=-Number.MAX_VALUE;break;case u.RAY:case u.GROUND_RAY:{const l=this._ray.origin,d=U(this.view.elevationProvider.getElevation(l[0],l[1],l[2],this.view.renderCoordsHelper.spatialReference,"ground"),0),h=this.view.renderCoordsHelper.getAltitude(l);this._isWorldDown&&h<d&&de(g.ray.direction,g.ray.direction),this._extensionType===u.GROUND_RAY&&d!=null&&(g.c1=Math.abs(h-d));break}}if(!ue(s.frustum,g))return M(this._start,this._end,t);const r=_e(g,O),a=pe(g,ze);return M(r,a,t)}_updateVertexAttributes(e,t){const s=e.geometries[0].getMutableAttribute($.POSITION).data;if(this.extensionType===u.FADED){const r=v(t,-this.fadedExtensions.start,O);s[0]=r[0],s[1]=r[1],s[2]=r[2];const a=v(t,0,O);s[3]=a[0],s[4]=a[1],s[5]=a[2];const l=v(t,1,O);s[6]=l[0],s[7]=l[1],s[8]=l[2];const d=v(t,1+this.fadedExtensions.end,O);s[9]=d[0],s[10]=d[1],s[11]=d[2]}else{const r=v(t,0,O);s[0]=r[0],s[1]=r[1],s[2]=r[2];const a=v(t,1,O);s[3]=a[0],s[4]=a[1],s[5]=a[2]}e.geometryVertexAttrsUpdated(e.geometryRecords[0])}}const g=se(),O=f(),ze=f(),B=re();var u;(function(o){o[o.LINE=0]="LINE",o[o.RAY=1]="RAY",o[o.GROUND_RAY=2]="GROUND_RAY",o[o.FADED=3]="FADED"})(u||(u={}));const k=1/3,q={start:k,end:k};class Le{constructor(e){this.resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1}destroy(){this._destroyResources()}get object(){return n(this._resources)?this._resources.object:null}get resources(){return n(this._resources)?this._resources.external:null}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncVisible())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}recreate(){this.attached&&this._createResources()}recreateGeometry(){if(!this.resourceFactory.recreateGeometry)return void this.recreate();const e=this.resourceFactory.view._stage;if(c(this._resources)||!e)return;const t=this._resources.object;this._resources.external.forEach(r=>{r.type===fe.Geometry&&e.remove(r)}),t.removeAllGeometries();const s=this.resourceFactory.recreateGeometry(this._resources.external,t,this._resources.layer);e.addMany(s)}_createOrDestroyResources(){this._attached?this._resources||this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const e=this.resourceFactory.view._stage;if(!e)return;const t=new ge({isPickable:!1,updatePolicy:Z.SYNC});e.add(t);const s=new me({castShadow:!1}),r=this.resourceFactory.createResources(s,t);r.forEach(l=>e.add(l)),e.add(s),t.add(s);const a=this.resourceFactory.cameraChanged?ye(this.resourceFactory.view.state,"camera",l=>this.resourceFactory.cameraChanged(l)):null;this._resources={layer:t,object:s,external:r,cameraHandle:a},this._syncVisible()}_destroyResources(){if(c(this._resources))return;const e=this.resourceFactory.view._stage;e==null||e.remove(this._resources.object),e==null||e.remove(this._resources.layer),this._resources.external.forEach(t=>{e==null||e.remove(t),"dispose"in t&&t.dispose()}),this._resources.object.dispose(),this._resources.cameraHandle&&this._resources.cameraHandle.remove(),this._resources=null}_syncVisible(){c(this._resources)||this._resources.object.setVisible(this._visible)}}const i={main:new m([255,127,0]),selected:new m([255,255,255]),staged:new m([12,207,255]),outline:new m([0,0,0,.5]),selectedOutline:new m([255,255,255])},P=.3;function x(o,e){const t=o.clone();return t.a*=e,t}function Ue(o,e){const t=o.clone(),s=Ie(t);s.s*=e;const r=Ne(s);return t.r=r.r,t.g=r.g,t.b=r.b,t}function _(o,e){if(e)for(const t in e)o[t]=e[t]}class je{constructor(e){this.color=i.main,this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=p.Opaque,_(this,e)}}class V{constructor(e){this.size=11,this.outlineSize=1,this.collisionPadding=9,this.color=i.main,this.outlineColor=i.outline,this.renderOccluded=p.Opaque,this.hoverOutlineColor=i.selectedOutline,_(this,e)}apply(e,t){const s=this[e];t.setParameters({color:w(s),transparent:e!=="color"||s.a<1,renderOccluded:this.renderOccluded})}}class He{constructor(e){this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.color=x(i.main,.5),this.hoverColor=i.main,this.renderOccluded=p.Transparent,this.minSquaredEdgeLength=900,_(this,e)}apply(e,t){const s=this[e];t.setParameters({color:w(s),transparent:s.a<1,renderOccluded:this.renderOccluded})}}class Ye{constructor(e){this.vertex=new V({color:i.main,outlineColor:i.outline}),this.edge=new V({color:Ue(x(i.main,2/3),.5),outlineColor:x(i.outline,.5),size:8,collisionPadding:8}),this.selected=new V({color:i.selected,outlineColor:i.outline}),this.edgeOffset=new He,_(this,e)}}class z{constructor(e){this.color=i.selected,this.width=1.5,this.stipplePattern=N(5),this.stippleOffColor=i.outline,this.falloff=0,this.innerWidth=1.5,this.innerColor=i.selected,this.renderOccluded=p.OccludeAndTransparent,_(this,e)}apply(e){e.color=w(this.color),e.width=this.width,e.stipplePattern=this.stipplePattern,e.stippleOffColor=w(this.stippleOffColor),e.falloff=this.falloff,e.innerWidth=this.innerWidth,e.innerColor=w(this.innerColor),e.renderOccluded=this.renderOccluded}}class Be{constructor(e){this.color=i.selected,this.size=4,this.outlineSize=1,this.outlineColor=i.outline,this.shape="square",_(this,e)}apply(e){e.color=w(this.color),e.size=this.size,e.outlineSize=this.outlineSize,e.outlineColor=w(this.outlineColor),e.primitive=this.shape}}class T{constructor(e){this.innerColor=i.selected,this.innerWidth=1,this.glowColor=i.main,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=P,this.globalAlphaContrastBoost=1.5,this.radius=3,this.heightFillColor=i.main,_(this,e)}apply(e,t=1){const s={glowColor:m.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:m.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*t,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in e?e.style=s:e.laserlineStyle=s}}class ke{constructor(e){this.outline=new z({color:i.outline,renderOccluded:p.OccludeAndTransparentStencil,stippleOffColor:i.selected,stipplePattern:N(5),width:1.5,innerWidth:0}),this.staged=new z({color:i.selected,renderOccluded:p.OccludeAndTransparentStencil,innerColor:i.staged,stippleOffColor:i.outline,stipplePattern:N(5),width:1.5}),this.shadowStyle=new T({globalAlpha:P,glowColor:i.main,glowFalloff:8,glowWidth:8,innerColor:i.selected,innerWidth:1}),_(this,e)}}class qe{constructor(e){this.outline=new Be({color:i.selected,outlineColor:i.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new T({globalAlpha:P,glowColor:i.main,glowFalloff:1.5,glowWidth:6,innerColor:i.selected,innerWidth:1,radius:2}),_(this,e)}}class Je extends z{constructor(e){super(),this.extensionType=u.GROUND_RAY,_(this,e)}}class Ke{constructor(e){this.lineGraphics=new ke,this.pointGraphics=new qe,this.heightPlane=new T({globalAlpha:P,glowColor:i.main,glowFalloff:8,glowWidth:8,innerColor:i.selected,innerWidth:1}),this.heightBox=new T({globalAlpha:P,glowColor:i.main,glowFalloff:8,glowWidth:8,innerColor:i.selected,innerWidth:0,heightFillColor:i.main}),this.zVerticalLine=new Je({color:x(i.main,5*P/3),falloff:2,innerColor:x(i.selected,0),renderOccluded:p.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:u.GROUND_RAY}),this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20,_(this,e)}}class Xe{constructor(e){this.visualElements=new Ke,this.reshapeManipulators=new Ye,this.zManipulator=new je,_(this,e)}colorToVec4(e){return w(e)}}function w(o){return we(m.toUnitRGBA(o))}const rt=new Xe;class Qe{constructor(e){this.resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1}destroy(){this._destroyResources()}get resources(){return n(this._resources)?this._resources.external:null}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncGeometriesToRenderer())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}recreate(){this.attached&&this._createResources()}recreateGeometry(){this.resourceFactory.recreateGeometry?c(this._resources)||(this._ensureRenderGeometriesRemoved(),this.resourceFactory.recreateGeometry(this._resources.external),this._syncGeometriesToRenderer()):this.recreate()}_createOrDestroyResources(){this._attached?c(this._resources)&&this._createResources():this._destroyResources()}_createResources(){var e;this._destroyResources();const t=this.resourceFactory.createResources();this._resources={layerView:new E({view:this.resourceFactory.view}),external:t,geometriesAdded:!1},this._syncGeometriesToRenderer();const s=(e=this.resourceFactory.view.basemapTerrain)==null?void 0:e.overlayManager;s&&s.registerDrapeSource(this._resources.layerView)}_destroyResources(){var e;if(c(this._resources))return;this._ensureRenderGeometriesRemoved();const t=(e=this.resourceFactory.view.basemapTerrain)==null?void 0:e.overlayManager;t&&t.unregisterDrapeSource(this._resources.layerView),this._resources=null}_syncGeometriesToRenderer(){this._visible?this._ensureRenderGeometriesAdded():this._ensureRenderGeometriesRemoved()}_ensureRenderGeometriesRemoved(){var e;c(this._resources)||(e=this.resourceFactory.view)==null||!e.basemapTerrain||!this._resources.geometriesAdded||(this.resourceFactory.view.basemapTerrain.overlayManager.renderer.removeGeometries(this._resources.external.geometries,this._resources.layerView,j.Geometry.UPDATE),this._resources.geometriesAdded=!1)}_ensureRenderGeometriesAdded(){c(this._resources)||this._resources.geometriesAdded||(this.resourceFactory.view.basemapTerrain.overlayManager.renderer.addGeometries(this._resources.external.geometries,this._resources.layerView,j.Geometry.UPDATE),this._resources.geometriesAdded=!0)}}let E=class extends Oe(Ce){constructor(o){super(o),this.drapeSourceType=ve.Features,this.updatePolicy=Z.SYNC}};y([b({constructOnly:!0})],E.prototype,"view",void 0),y([b({readOnly:!0})],E.prototype,"drapeSourceType",void 0),E=y([ee("DrapedVisualElementLayerView")],E);class it{constructor(e){this.view=null,this._attachmentOrigin=be(0,0,0,null),this._attachmentOriginDirty=!0,this.events=new te,this._isDraped=!1,this._geometry=null,this._width=1,this._color=G(1,0,1,1),this._innerWidth=0,this._innerColor=G(1,1,1,1),this._stipplePattern=null,this._stippleOffColor=null,this._falloff=0,this._elevationInfo=null,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=p.OccludeAndTransparentStencil,this.resources=new Le({view:e.view,createResources:s=>this._createResources(s),recreateGeometry:(s,r)=>(s.geometries.length=0,this._recreateGeometry(r,s.material,s.geometries),s.geometries)}),this._attachmentOrigin.spatialReference=e.view.spatialReference,this.drapedResources=new Qe({view:e.view,createResources:()=>this._createDrapedResources(),recreateGeometry:s=>{s.geometries=this._createRenderGeometriesDraped(s.material),this._attachmentOriginChanged()}});let t=!0;this._laserline=new K({view:e.view});for(const s in e)s in this?s==="attached"?t=e[s]:this[s]=e[s]:console.error("Cannot set unknown property",s);this.attached=t}destroy(){this.resources.destroy(),this.drapedResources.destroy(),this._laserline.destroy()}get isDraped(){return this._isDraped}set isDraped(e){e!==this._isDraped&&(this._isDraped=e,this._updateAttached(this.attached),this._laserline.attached=this.laserlineAttached)}get laserlineAttached(){return this.attached&&this.visible&&n(this._laserlineStyle)&&!this.isDraped&&this.laserlineEnabled}get visible(){return this.resources.visible}set visible(e){this.resources.visible=e,this.drapedResources.visible=e,this._laserline.attached=this.laserlineAttached}get attached(){return this.resources.attached||this.drapedResources.attached}set attached(e){this._updateAttached(e)}_updateAttached(e){this.resources.attached=!this.isDraped&&e,this.drapedResources.attached=this.isDraped&&e,this._laserline.attached=this.laserlineAttached,this.attached&&this._attachmentOriginChanged()}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.resources.recreateGeometry(),this.drapedResources.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){A(e,this._color)||(S(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){A(e,this._innerColor)||(S(this._innerColor,e),this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){const t=n(e)!==n(this._stipplePattern);this._stipplePattern=e,t?this.resources.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){e&&this._stippleOffColor&&A(e,this._stippleOffColor)||(this._stippleOffColor=e?Q(e):null,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.resources.recreateGeometry()}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(e){this._laserlineStyle=e,this._laserline.attached=this.laserlineAttached,n(e)&&(this._laserline.style=e)}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,this._laserline.attached=this.laserlineAttached)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get attachmentOrigin(){if(!this._attachmentOriginDirty)return this._attachmentOrigin;const e=n(this.resources.resources)?this.resources.resources.geometries:null;if(!e||e.length===0)return null;Ae(C,0,0,0);let t=0;for(const s of e){const r=s.vertexAttributes.get($.POSITION),a=s.indices.get($.POSITION),l=X(this.resources.resources).material.isClosed(r.data,a);Pe(r,a,l,J)&&(Ee(C,C,J),t++)}return t===0?null:(xe(C,C,1/t),this.view.renderCoordsHelper.fromRenderCoords(C,this._attachmentOrigin),this._attachmentOriginDirty=!1,this._attachmentOrigin)}_updateMaterial(){n(this.resources.resources)&&this.resources.resources.material.setParameters(this.materialParameters),n(this.drapedResources.resources)&&this.drapedResources.resources.material.setParameters(this.materialParameters)}get isClosed(){return n(this.geometry)&&this.geometry.type==="polygon"}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:!1,isClosed:this.isClosed,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,join:"round",polygonOffset:!0,renderOccluded:this.normalizedRenderOccluded}}get normalizedRenderOccluded(){return this.isDraped&&this._renderOccluded===p.OccludeAndTransparentStencil?p.OccludeAndTransparent:this._renderOccluded}_recreateGeometry(e,t,s){const r=this._createRenderGeometries();for(const a of r)e.addGeometry(a,t),s.push(a);this._attachmentOriginChanged()}_attachmentOriginChanged(){this._attachmentOriginDirty=!0,this.events.emit("attachment-origin-changed")}_createResources(e){const t=new I(this.materialParameters),s=[];return this._recreateGeometry(e,t,s),{material:t,geometries:s,forEach:r=>{r(t),s.forEach(r)}}}_createDrapedResources(){const e=new I(this.materialParameters);return{material:e,geometries:this._createRenderGeometriesDraped(e)}}_createRenderGeometriesDraped(e){const t=this.geometry;if(c(t))return[];const s=De(t,this.view.basemapTerrain.spatialReference),r=[];for(const{position:a}of s.lines){const l={overlayInfo:{spatialReference:this.view.basemapTerrain.spatialReference,renderCoordsHelper:this.view.renderCoordsHelper},attributeData:{position:a},removeDuplicateStartEnd:this.isClosed?D.REMOVE:D.KEEP},d=new $e(H(l),e),h=Ge(Ze);Y(h,a),Se(d.boundingSphere,.5*(h[0]+h[3]),.5*(h[1]+h[4]),0,.5*Math.sqrt((h[3]-h[0])*(h[3]-h[0])+(h[4]-h[1])*(h[4]-h[1]))),r.push(d)}return r}calculateMapBounds(e){if(c(this.resources.resources))return!1;const t=this.view.renderCoordsHelper;for(const s of this.resources.resources.geometries){const r=s.vertexAttributes.get($.POSITION),a=new Float64Array(r.data.length);Te(r.data,t.spatialReference,0,a,this.view.spatialReference,0,r.data.length/3),Y(e,a)}return!0}_createRenderGeometries(){var e;const t=this.geometry;if(c(t))return[];const s=We(t,this.view.elevationProvider,this.view.renderCoordsHelper,Fe.fromElevationInfo((e=this.elevationInfo)!=null?e:new Me({mode:Ve(t,null)}))),r=[],a=[];for(const{position:l,mapPosition:d}of s.lines){const h={overlayInfo:null,attributeData:{position:l,mapPosition:d},removeDuplicateStartEnd:this.isClosed?D.REMOVE:D.KEEP};r.push(H(h)),a.push(l)}return this._laserline.pathVerticalPlane=a,r}}const Ze=Re(),J=f(),C=f();let R=class extends te.EventedAccessor{constructor(o){super(o),this.tracking=!1,this.displaying=!1,this.isDraped=!1}};y([b({constructOnly:!0})],R.prototype,"graphic",void 0),y([b()],R.prototype,"tracking",void 0),y([b()],R.prototype,"displaying",void 0),y([b()],R.prototype,"isDraped",void 0),R=y([ee("esri.views.3d.layers.graphics.GraphicState")],R);export{st as M,it as S,u as T,Le as a,R as e,i as r,rt as y};
